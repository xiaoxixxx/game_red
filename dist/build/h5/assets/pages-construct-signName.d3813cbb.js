import{u as a,r as e,a as s,o as t,ac as l,b as o,c as u,d as n,e as c,w as r,T as i,i as d,f as g,k as m,l as f,t as p,ae as v,q as _}from"./index.61b5b460.js";import{_ as h,b,a as N,r as j,f as k}from"./request.ef5cbed2.js";import{_ as x}from"./loading.d21df86d.js";import{t as S}from"./topNav.ecc43495.js";import{L as w}from"./en-US.bcbc83b2.js";var y=h({__name:"signName",setup(h){a();const y=e(""),L=e(null),q=(a,e)=>{if(""==e)return!1;L.value.loading=!0,v({url:J.value,filePath:e,name:"cert",success:a=>{I.value.contract=JSON.parse(a.data).data,k("log","at pages/construct/signName.vue:56",I.value),j({url:"machine/contract",methods:"post",data:{...I.value}}).then((a=>{L.value.loading=!1,_({url:"./signSuccess"})})).catch((a=>{L.value.loading=!1,i.text(a.message)}))},fail:a=>{L.value.loading=!1,k("log","at pages/construct/signName.vue:76",a,"eeeeeeeeeee")}})},C=()=>{y.value=""},{t:U}=s(),I=e({id:"",contract:""}),J=e("");return t((()=>{l.use("en-US",w),j({url:"setting/upload",methods:"get"}).then((a=>{J.value=a.upload_host+"api/uploads",k("log","at pages/construct/signName.vue:100",J.value)})).catch((a=>{i.text(a.message)}))})),b((a=>{a.id?I.value.id=a.id:history.back()})),(a,e)=>{const s=d,t=o("nut-signature"),l=N(u("Loading"),x);return n(),c(s,null,{default:r((()=>[g(S,{title:m(U)("construct.c_s6")},null,8,["title"]),g(s,{class:"mgtb20 pdlr30"},{default:r((()=>[f(p(m(U)("construct.c_s3")),1)])),_:1}),g(s,{class:"sign"},{default:r((()=>[g(t,{"line-width":3,onConfirm:q,onClear:C,"stroke-style":"#000"})])),_:1}),g(l,{ref_key:"showLoading",ref:L},null,512)])),_:1})}}},[["__scopeId","data-v-eccf09ca"]]);export{y as default};
