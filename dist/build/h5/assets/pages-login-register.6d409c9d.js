import{u as e,a as l,r as t,J as a,K as s,o as u,g as o,s as n,b as r,c as d,d as i,e as c,w as p,i as v,f as m,l as g,t as h,k as w,m as _,n as y,M as f,h as x,j as k,F as b,q as A,T as E,v as j,P as C,Q as D}from"./index.61b5b460.js";import{_ as F}from"./loading.d21df86d.js";import{_ as I,o as U,c as S,b as V,r as Y,a as R}from"./request.ef5cbed2.js";import{_ as Q}from"./l_back.5b67b1f1.js";import{_ as J}from"./lang.08833616.js";import{_ as M,a as B}from"./pwd.d3378111.js";import{_ as H,a as Z}from"./eyeClose.26c6c18a.js";var G=I({__name:"register",setup(I){const G=e(),{t:X}=l(),W=t(!0),L=()=>{history.back()};t(!0),t(!0);const T=t({phone:"",password:"",password2:"",invite_code:"",sms_code:""});t(!1);const K=t(""),O=t(!1),z=t(!1),P=t(!1);a(T,((e,l)=>{if(K.value.preg){let e=K.value.preg.replace("/","").replace("/","");if(!new RegExp(e).test(T.value.phone))return P.value=!1,z.value=!1,!1;P.value=!0}return T.value.password.length<6||T.value.password2.length<6||T.value.password.length>24||T.value.password2.length>24||T.value.password!==T.value.password2||re.value&&!T.value.sms_code||de.value&&!T.value.invite_code?(z.value=!1,!1):void(z.value=!0)}),{deep:!0});const N={background:G.$state.contentColor,color:"#fff"};G.$state.btnDis;const q=s((()=>{try{return`/static/guojia/${K.value.country_code.replace("+","")}.png`}catch(e){}})),$=t(60),ee=t(!1),le=()=>{let e=K.value.preg.replace("/","").replace("/","");if(!new RegExp(e).test(T.value.phone))return E.text(X("login.l_l3")),!1;ae.value&&clearInterval(ae.value);const l={tel:T.value.phone,country:K.value.text,type:1};Y({url:"join/sms",methods:"post",data:l}).then((e=>{se(),ee.value=!0,E.text(X("login.l_r8"))})).catch((e=>{E.text(e.message)}))},te=()=>{ge.value&&(O.value=!0)},ae=t(null),se=()=>{ae.value=setInterval((()=>{0==$.value&&(clearInterval(ae.value),$=!1),$.value--}),1e3)},ue=t(0),oe=t(null),ne={back(){history.back()},changePage(){A({url:"../mine/langSetting"})},regisHandle(e){let l=K.value.preg.replace("/","").replace("/","");return new RegExp(l).test(T.value.phone)?T.value.password.length<6||T.value.password2.length<6||T.value.password.length>24||T.value.password2.length>24?(E.text(X("login.l_l4")),!1):T.value.password!==T.value.password2?(E.text(X("login.l_r4")),!1):re.value&&!T.value.sms_code?(E.text(X("login.l_r5")),!1):de.value&&!T.value.invite_code?(E.text(X("login.l_r6")),!1):(oe.value.loading=!0,void setTimeout((()=>{e()}),1500)):(E.text(X("login.l_l3")),!1)},regisHandle1(){T.value.country_code=K.value.text,Y({url:"/join/register",methods:"post",data:T.value}).then((e=>{oe.value.loading=!1,E.text(X("login.l_r7")),n("token",e.accessToken),setTimeout((()=>{A({url:"../tabbar/index"})}),1e3)})).catch((e=>{oe.value.loading=!1,E.text(e.message)}))}},re=t(!1),de=t(!1),ie=t([]),ce=t([]),pe=t(""),ve=e=>{if(!ie.value)return!1;let l=[];ie.value.forEach((e=>{if(!e.alias.toLowerCase().includes(pe.value.toLowerCase())&&!e.country_code.toLowerCase().includes(pe.value.toLowerCase()))return!1;l.push(e)})),ce.value=l};U((()=>{Y({url:"setting/register",methods:"get"}).then((e=>{1==e.registerInviteCode.status?de.value=!0:de.value=!1})),G.$state.countryCode.length>0?(ie.value=G.$state.countryCode,K.value=ie.value[0],ce.value=ie.value,1==K.value.sms_status?re.value=!0:re.value=!1):Y({url:"/setting/country",methods:"get"}).then((e=>{let l=[];for(let t=0;t<e.length;t++)e[t].text=e[t].country_code,e[t].value=e[t].id,l.push(e[t]);ce.value=l,G.setCountryCode(l),ie.value=G.$state.countryCode,ge.value?K.value=G.$state.countryCode[0]:(G.$state.countryCode.forEach((e=>{let l="+"+he.value;e.country_code==l&&(K.value=e)})),K.value||(K.value=G.$state.countryCode[0])),1==K.value.sms_status?re.value=!0:re.value=!1}))})),S((()=>{ae.value&&clearInterval(ae.value)})),u((()=>{oe.value.loading=!0,setTimeout((()=>{oe.value.loading=!1}),1500)}));const me=t(!0),ge=t(!0),he=t(0);return V((e=>{e.code&&(T.value.invite_code=e.code,me.value=!1),e.country&&(ge.value=!1,he.value=e.country),o("setLang")||Y({url:"setting/lang",methods:"get"}).then((e=>{n("lang",e[0].lang),n("setLang",!0),history.go(0)}))})),(e,l)=>{const t=j,a=v,s=C,u=D,o=r("nut-icon"),n=r("nut-popup"),E=R(d("Loading"),F);return i(),c(a,{class:"pdlr30 l_bg"},{default:p((()=>[m(a,{class:"pt30 between"},{default:p((()=>[m(t,{src:Q,mode:"widthFix",style:{width:"70rpx",height:"70rpx"},onClick:L}),m(t,{src:J,style:{width:"57rpx",height:"56rpx"},onClick:l[0]||(l[0]=e=>{A({url:"../mine/langSetting"})})})])),_:1}),m(a,{class:"pdlr40"},{default:p((()=>[m(a,{class:"mt85 text_white f60 text_bold"},{default:p((()=>[g(h(w(X)("login.l_b2")),1)])),_:1}),m(a,{style:{"margin-top":"114rpx"}},{default:p((()=>[m(a,{class:"flex between l_inpS"},{default:p((()=>[m(a,{class:"l_inpBg between l_inpS pdlr20",style:{width:"360rpx"},onClick:te},{default:p((()=>[m(a,{class:"between",style:{width:"70%"}},{default:p((()=>[m(a,{class:"center"},{default:p((()=>[m(t,{src:w(q),style:{width:"43rpx",height:"29rpx"}},null,8,["src"])])),_:1}),m(s,{class:"pl5 f22"},{default:p((()=>[g(h(K.value.country_code),1)])),_:1})])),_:1}),m(a,null,{default:p((()=>[m(t,{src:M,style:{width:"30rpx",height:"18rpx"}})])),_:1})])),_:1}),m(a,{class:"ml20 l_inpS l_inpBg flex col_center pdlr50",style:{width:"100%"}},{default:p((()=>[m(u,{type:"text",placeholder:w(X)("login.l_l1"),style:{color:"#333"},modelValue:T.value.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value.phone=e)},null,8,["placeholder","modelValue"]),P.value?(i(),c(o,{key:0,name:"Check",size:"20",class:"phoneCheck animate__animated animate__fadeIn",color:"green"})):_("",!0)])),_:1})])),_:1}),m(a,{class:"flex between l_inpS mt40 l_inpBg pdlr30"},{default:p((()=>[m(a,null,{default:p((()=>[m(t,{src:B,style:{width:"40rpx",height:"40rpx"}})])),_:1}),m(a,{class:"l_inpS flex col_center",style:{width:"100%"}},{default:p((()=>[m(u,{class:"ml39",type:W.value?"password":"text",placeholder:w(X)("login.l_l2"),style:{color:"#333"},modelValue:T.value.password,"onUpdate:modelValue":l[2]||(l[2]=e=>T.value.password=e)},null,8,["type","placeholder","modelValue"])])),_:1}),W.value?_("",!0):(i(),c(t,{key:0,src:H,style:{width:"40rpx",height:"40rpx"},onClick:l[3]||(l[3]=e=>W.value=!W.value)})),W.value?(i(),c(t,{key:1,src:Z,style:{width:"40rpx",height:"40rpx"},onClick:l[4]||(l[4]=e=>W.value=!W.value)})):_("",!0)])),_:1}),m(a,{class:"flex between l_inpS mt40 l_inpBg pdlr30"},{default:p((()=>[m(a,null,{default:p((()=>[m(t,{src:B,style:{width:"40rpx",height:"40rpx"}})])),_:1}),m(a,{class:"l_inpS flex col_center",style:{width:"100%"}},{default:p((()=>[m(u,{class:"ml39",type:W.value?"password":"text",placeholder:w(X)("login.l_r1"),style:{color:"#333"},modelValue:T.value.password2,"onUpdate:modelValue":l[5]||(l[5]=e=>T.value.password2=e)},null,8,["type","placeholder","modelValue"])])),_:1}),W.value?_("",!0):(i(),c(t,{key:0,src:H,style:{width:"40rpx",height:"40rpx"},onClick:l[6]||(l[6]=e=>W.value=!W.value)})),W.value?(i(),c(t,{key:1,src:Z,style:{width:"40rpx",height:"40rpx"},onClick:l[7]||(l[7]=e=>W.value=!W.value)})):_("",!0)])),_:1}),re.value?(i(),c(a,{key:0,class:"flex between l_inpS mt40"},{default:p((()=>[m(a,{class:"l_inpS l_inpBg flex col_center pdlr50",style:{width:"100%"}},{default:p((()=>[m(u,{type:"text",placeholder:w(X)("login.l_r2"),style:{color:"#333"},modelValue:T.value.sms_code,"onUpdate:modelValue":l[8]||(l[8]=e=>T.value.sms_code=e)},null,8,["placeholder","modelValue"])])),_:1}),ee.value?_("",!0):(i(),c(a,{key:0,class:"l_inpBg center l_inpS pdlr20 ml20 text_white",style:y([{width:"220rpx"},{background:w(G).$state.contentColor}]),onClick:le},{default:p((()=>[g(" OTP ")])),_:1},8,["style"])),e.else?(i(),c(a,{key:1,class:"l_inpBg center l_inpS pdlr20 ml20 text_white",style:y([{width:"220rpx"},{background:w(G).$state.contentColor}]),onClick:le},{default:p((()=>[g(h($.value)+"s ",1)])),_:1},8,["style"])):_("",!0)])),_:1})):_("",!0),m(a,{class:"flex between l_inpS mt40 l_inpBg pdlr30"},{default:p((()=>[m(a,null,{default:p((()=>[m(t,{src:"data:image/png;base64,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",style:{width:"40rpx",height:"40rpx"}})])),_:1}),m(a,{class:"l_inpS flex col_center",style:{width:"100%"}},{default:p((()=>[m(u,{class:"ml39",type:"text",placeholder:w(X)("login.l_r3"),style:{color:"#333"},modelValue:T.value.invite_code,"onUpdate:modelValue":l[9]||(l[9]=e=>T.value.invite_code=e),disabled:!me.value},null,8,["placeholder","modelValue","disabled"])])),_:1})])),_:1}),m(a,{class:"center l_inpS mt40 l_inpBg pdlr30 text_white f32",style:y([{"margin-top":"112rpx"},{background:w(G).$state.contentColor}]),onClick:l[10]||(l[10]=e=>ne.regisHandle(ne.regisHandle1))},{default:p((()=>[g(h(w(X)("login.l_b2")),1)])),_:1},8,["style"])])),_:1})])),_:1}),m(n,{position:"left",style:{width:"40%",height:"100%"},visible:O.value,"onUpdate:visible":l[12]||(l[12]=e=>O.value=e)},{default:p((()=>[m(a,{class:"inpSearch"},{default:p((()=>[m(u,{type:"text",modelValue:pe.value,"onUpdate:modelValue":l[11]||(l[11]=e=>pe.value=e),onClick:f(ve,["stop"]),onInput:ve,style:{}},null,8,["modelValue","onClick"]),m(o,{name:"search",style:{"margin-right":"40rpx"},size:"20",color:"rgb(22, 183, 57)"})])),_:1}),(i(!0),x(b,null,k(ce.value,((e,l)=>(i(),c(a,{class:"listItem2",style:y(l==ue.value?N:""),onClick:t=>((e,l)=>{if(K.value=e,ue.value=l,O.value=!1,z.value=!1,1==K.value.sms_status?re.value=!0:re.value=!1,K.value.preg){let e=K.value.preg.replace("/","").replace("/","");if(!new RegExp(e).test(T.value.phone))return P.value=!1,z.value=!1,!1;P.value=!0}})(e,l)},{default:p((()=>[g(h(e.text)+" "+h(e.name),1)])),_:2},1032,["style","onClick"])))),256))])),_:1},8,["visible"]),m(E,{ref_key:"showLoading",ref:oe},null,512)])),_:1})}}},[["__scopeId","data-v-00df7c10"]]);export{G as default};
