import{a as e,u as l,r as t,J as a,b as s,c as o,d as n,e as d,w as r,i as c,f as u,l as p,t as i,k as _,m as h,n as m,q as f,T as v,v as g,P as x,Q as y}from"./index.61b5b460.js";import{_ as w}from"./loading.d21df86d.js";import{_ as b,c as k,b as C,a as S,r as j}from"./request.ef5cbed2.js";import{_ as V}from"./l_back.5b67b1f1.js";import{_ as B}from"./lang.08833616.js";import{_ as I,a as $}from"./pwd.d3378111.js";import{_ as P,a as T}from"./eyeClose.26c6c18a.js";var U=b({__name:"resetPwd",setup(b){const{t:U}=e(),q=l(),F=t(!0),L=()=>{history.back()},z=t({phone:"",password:"",sms_code:"",country_code:""});t(!1),t(""),t(!1);const D=t(!1),J=t(!1);a(z,((e,l)=>!(z.value.password.length<6||z.value.password.length>24)&&(!(!z.value.phone||!z.value.sms_code)&&void(D.value=!0))),{deep:!0}),q.$state.contentColor,q.$state.btnDis;const O=t(60),Q=t(!1),A=()=>{E.value&&clearInterval(E.value);const e={tel:z.value.phone,country:z.value.country_code,type:2};j({url:"join/sms",methods:"post",data:e}).then((e=>{H(),Q.value=!0,v.text(U("login.l_f3"))})).catch((e=>{v.text(e.message)}))},E=t(null),G=()=>{K.value.loading=!0,j({url:"join/forget",methods:"post",data:z.value}).then((e=>{v.text(U("login.l_f4")),K.value.loading=!0,setTimeout((()=>{f({url:"./login"})}),1e3)})).catch((e=>{K.value.loading=!1,v.text(e.message)}))},H=()=>{E.value=setInterval((()=>{0==O.value&&(clearInterval(E.value),O=!1),O.value--}),1e3)};t(0);const K=t(null);return t([]),k((()=>{E.value&&clearInterval(E.value)})),C((e=>{e.code&&(z.value.country_code="+"+e.code)})),(e,l)=>{const t=g,a=c,v=x,b=y,k=s("nut-icon"),C=S(o("Loading"),w);return n(),d(a,{class:"pdlr30 l_bg"},{default:r((()=>[u(a,{class:"pt30 between"},{default:r((()=>[u(t,{src:V,mode:"widthFix",style:{width:"70rpx",height:"70rpx"},onClick:L}),u(t,{src:B,style:{width:"57rpx",height:"56rpx"},onClick:l[0]||(l[0]=e=>{f({url:"../mine/langSetting"})})})])),_:1}),u(a,{class:"pdlr40"},{default:r((()=>[u(a,{class:"mt85 text_white f60 text_bold"},{default:r((()=>[p(i(_(U)("login.l_f1")),1)])),_:1}),u(a,{style:{"margin-top":"114rpx"}},{default:r((()=>[u(a,{class:"flex between l_inpS"},{default:r((()=>[u(a,{class:"l_inpBg between l_inpS pdlr20",style:{width:"360rpx"}},{default:r((()=>[u(a,{class:"flex col_center"},{default:r((()=>[u(t,{src:"/assets/en.01d5dd18.png",mode:"widthFix",style:{width:"43rpx"}}),u(v,{class:"pl5 f22"},{default:r((()=>[p(i(z.value.country_code),1)])),_:1})])),_:1}),u(a,null,{default:r((()=>[u(t,{src:I,style:{width:"30rpx",height:"18rpx"}})])),_:1})])),_:1}),u(a,{class:"ml20 l_inpS l_inpBg flex col_center pdlr50",style:{width:"100%"}},{default:r((()=>[u(b,{type:"text",placeholder:_(U)("login.l_l1"),style:{color:"#333"},modelValue:z.value.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>z.value.phone=e)},null,8,["placeholder","modelValue"]),J.value?(n(),d(k,{key:0,name:"Check",size:"20",class:"phoneCheck animate__animated animate__fadeIn",color:"green"})):h("",!0)])),_:1})])),_:1}),u(a,{class:"flex between l_inpS mt40 l_inpBg pdlr30"},{default:r((()=>[u(a,null,{default:r((()=>[u(t,{src:$,style:{width:"40rpx",height:"40rpx"}})])),_:1}),u(a,{class:"l_inpS flex col_center",style:{width:"100%"}},{default:r((()=>[u(b,{class:"ml39",type:F.value?"password":"text",placeholder:_(U)("login.l_l2"),style:{color:"#333"},modelValue:z.value.password,"onUpdate:modelValue":l[2]||(l[2]=e=>z.value.password=e)},null,8,["type","placeholder","modelValue"])])),_:1}),F.value?h("",!0):(n(),d(t,{key:0,src:P,style:{width:"40rpx",height:"40rpx"},onClick:l[3]||(l[3]=e=>F.value=!F.value)})),F.value?(n(),d(t,{key:1,src:T,style:{width:"40rpx",height:"40rpx"},onClick:l[4]||(l[4]=e=>F.value=!F.value)})):h("",!0)])),_:1}),u(a,{class:"flex between l_inpS mt40"},{default:r((()=>[u(a,{class:"l_inpS l_inpBg flex col_center pdlr50",style:{width:"100%"}},{default:r((()=>[u(b,{type:"text",placeholder:_(U)("login.l_r2"),style:{color:"#333"},modelValue:z.value.sms_code,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.sms_code=e)},null,8,["placeholder","modelValue"])])),_:1}),Q.value?(n(),d(a,{key:1,class:"l_inpBg center l_inpS pdlr20 ml20 text_white",style:m([{width:"220rpx"},{background:_(q).$state.contentColor}])},{default:r((()=>[p(i(O.value)+"s ",1)])),_:1},8,["style"])):(n(),d(a,{key:0,onClick:A,class:"l_inpBg center l_inpS pdlr20 ml20 text_white",style:m([{width:"220rpx"},{background:_(q).$state.contentColor}])},{default:r((()=>[p(" OTP ")])),_:1},8,["style"]))])),_:1}),u(a,{onClick:G,class:"center l_inpS mt40 l_inpBg pdlr30 text_white",style:m([{"margin-top":"112rpx"},{background:_(q).$state.contentColor}])},{default:r((()=>[p(i(_(U)("login.l_f2")),1)])),_:1},8,["style"])])),_:1})])),_:1}),u(C,{ref_key:"showLoading",ref:K},null,512)])),_:1})}}},[["__scopeId","data-v-48beb581"]]);export{U as default};
