import{u as e,a,r as l,b as t,c as s,d as r,e as o,w as u,i as c,f as d,k as n,l as i,t as f,h as _,j as v,F as m,m as p,n as g,p as h,T as b,q as y,P as x}from"./index.61b5b460.js";import{_ as k,c as C,o as T,a as w,r as j,f as I}from"./request.ef5cbed2.js";import{_ as L}from"./loading.d21df86d.js";import{t as F}from"./topNav.ecc43495.js";import{u as $}from"./index.1818c676.js";import{Q as q}from"./qrcode.vue.esm.7b231d83.js";var B=k({__name:"usdtOrder",setup(k){const B=e(),{t:D}=a(),{toClipboard:N}=$(),O={background:B.$state.contentColor,color:"#fff",border:"none"},U={color:B.$state.contentColor},z={color:"#FFA115",marginTop:"23rpx"},A=l(null),E=l(""),H=l(0),P=l(!1),Q=l(!1),R=[{name:"TRC20"}],S=l(0),G=()=>{A.value=setInterval((()=>{0==H.value?(clearTimeout(A.value),K()):(H.value--,(e=>{let a=parseInt(e/60),l=e%60;E.value=(a<10?"0"+a:a)+":"+(l<10?"0"+l:l)})(H.value))}),1e3)},J=()=>{Q.value=!0},K=()=>{P.value.loading=!0,j({url:"finance/usdt/recharge/cancel",methods:"post",data:{order_no:M.value.order_no}}).then((e=>{P.value.loading=!1,b.text(D("all.a_c5")),y({url:"../tabbar/index"})})).catch((e=>{b.text(e.message)}))},M=l({}),V=l(""),W=l(!1),X=l(1);return C((()=>{A.value&&clearInterval(A.value)})),T((()=>{j({url:"finance/usdt/recharge/index",methods:"get"}).then((e=>{if(!e.order)return history.back(),!1;V.value=e.address,M.value=e.order,1==e.type?W.value=!1:W.value=!0,X.value=e.rate,A.value&&clearInterval(A.value),H.value=e.order.expire_time,G()}))})),(e,a)=>{const l=x,k=c,C=t("nut-overlay"),T=w(s("Loading"),L);return r(),o(k,null,{default:u((()=>[d(F,{title:n(D)("recharge.r_r1"),goBackNum:2},null,8,["title"]),d(k,{class:"pdlr45 mt70"},{default:u((()=>[d(k,{class:"mt38"},{default:u((()=>[d(k,{class:"mt30 top_box"},{default:u((()=>[d(k,{class:"f26 flex col_center"},{default:u((()=>[i(f(n(D)("recharge.r_o1"))+": ",1),d(l,{class:"pl10 f34",style:{color:"#DB1825"}},{default:u((()=>[i(f(E.value),1)])),_:1})])),_:1}),d(k,{class:"mt34 flex-wrap between"},{default:u((()=>[d(k,{class:"items"},{default:u((()=>[d(k,{class:"iTitle"},{default:u((()=>[i(f(n(D)("recharge.r_o2")),1)])),_:1}),d(k,{style:z},{default:u((()=>[i(f(M.value.order_no),1)])),_:1})])),_:1}),d(k,{class:"items"},{default:u((()=>[d(k,{class:"iTitle"},{default:u((()=>[i(f(n(D)("recharge.r_o3")),1)])),_:1}),d(k,{style:z},{default:u((()=>[i(f(M.value.amount),1)])),_:1})])),_:1}),d(k,{class:"items topLine"},{default:u((()=>[d(k,{class:"iTitle"},{default:u((()=>[i(f(n(D)("recharge.r_o4")),1)])),_:1}),d(k,{style:z},{default:u((()=>[i(f(n(D)("recharge.r_o5")),1)])),_:1})])),_:1}),d(k,{class:"items topLine"},{default:u((()=>[d(k,{class:"iTitle"},{default:u((()=>[i("USDT")])),_:1}),d(k,{style:z},{default:u((()=>[i(f(M.value.amount?(M.value.amount*X.value).toFixed(2):0),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(k,{class:"addressBox"},{default:u((()=>[d(k,{class:"typeList center mb30"},{default:u((()=>[(r(),_(m,null,v(R,((a,l)=>d(k,{class:"mglr20 typeItem",style:g(S.value==l?O:""),onClick:a=>e.changeCode(l)},{default:u((()=>[i(f(a.name),1)])),_:2},1032,["style","onClick"]))),64))])),_:1}),V.value?(r(),o(q,{key:0,value:V.value,size:163,level:"H"},null,8,["value"])):p("",!0),d(k,{class:"mt35 f26"},{default:u((()=>[i(f(n(D)("recharge.r_o6")),1)])),_:1}),d(k,{class:"mt23 f22 addEl",onClick:a[0]||(a[0]=e=>(async e=>{try{await N(e),b.text(D("all.a_c4"))}catch(a){I("error","at pages/recharge/usdtOrder.vue:142",a)}})(V.value))},{default:u((()=>[i(f(V.value),1)])),_:1})])),_:1}),d(k,{class:"btns mt78",style:g([U,{"box-shadow":"none","background-color":"#fff"}]),onClick:J},{default:u((()=>[i(f(n(D)("recharge.r_o7")),1)])),_:1}),d(k,{class:"btns mt22",style:O,onClick:a[1]||(a[1]=e=>{return a="./txid?order="+M.value.order_no,void y({url:a});var a})},{default:u((()=>[i(f(n(D)("recharge.r_r6")),1)])),_:1})])),_:1})])),_:1}),d(k,{style:{height:"100rpx"}}),d(C,{visible:Q.value,"onUpdate:visible":a[2]||(a[2]=e=>Q.value=e)},{default:u((()=>[h("div",{class:"wrapper"},[h("div",{class:"content"},[d(k,{class:"f40"},{default:u((()=>[i(f(n(D)("all.a_t1")),1)])),_:1}),d(k,{class:"f30 mt40"},{default:u((()=>[i(f(n(D)("recharge.r_o8")),1)])),_:1}),d(k,{class:"between"},{default:u((()=>[d(k,{style:g({border:"1rpx solid"+n(B).$state.contentColor,color:"#333"})},{default:u((()=>[i(f(n(D)("all.a_c1")),1)])),_:1},8,["style"]),d(k,{style:g({background:n(B).$state.contentColor}),onClick:K},{default:u((()=>[i(f(n(D)("all.a_c2")),1)])),_:1},8,["style"])])),_:1})])])])),_:1},8,["visible"]),d(T,{ref_key:"showLoading",ref:P},null,512)])),_:1})}}},[["__scopeId","data-v-1794611c"]]);export{B as default};
