import{u as e,a as t,r as l,o as a,g as s,b as c,c as u,d as r,e as o,w as n,i as d,f as i,k as _,l as v,t as f,m as p,n as x,p as h,q as b,T as y,v as m,P as g}from"./index.61b5b460.js";import{_ as k}from"./loading.d21df86d.js";import{_ as w,b as j,c as C,a as $,r as H}from"./request.ef5cbed2.js";import{t as S}from"./topNav.ecc43495.js";var F=w({__name:"index",setup(w){const F=e(),{t:I}=t(),O=l(null),B=l(!1),L=l(!1),M=()=>{if(A.value){if(z.value.balance-0<q.value.price_per-0)return L.value=!0,!1;B.value=!0}else{if(0==q.value.max_invest_per)return y.text(I("add1.a_a3")),!1;if(z.value.balance-0<q.value.price-0)return L.value=!0,!1;B.value=!0}},T=()=>{if(A.value)try{O.value.loading=!0,H({url:"invest/investPre",methods:"post",data:{projectId:P.value,num:1}}).then((e=>{O.value.loading=!1,y.text(I("construct.c_d1")),b({url:"./sign?id="+e.id})})).catch((e=>{O.value.loading=!1,y.text(e.message)}))}catch(e){}else try{O.value.loading=!0,H({url:"invest/invest",methods:"post",data:{projectId:P.value,num:1}}).then((e=>{y.text(I("construct.c_d1")),b({url:"./sign?id="+e.id})})).catch((e=>{y.text(e.message),O.value.loading=!1}))}catch(e){}G()},P=l(0),q=l({sale_panel:0,total_panel:1}),A=l(null),D=l(!1),E=l(0),N=l(null),U=l(""),z=l({}),G=()=>{if(A.value)try{O.value.loading=!0,H({url:"invest/projectPreDetail",methods:"get",data:{id:P.value}}).then((e=>{O.value.loading=!1,q.value=e.project.project,q.value.price_per=e.project.price_per,0==e.is_buy?D.value=!0:D.value=!1,e.time<e.project.start_time?(q.value.hasStart=2,E.value=e.project.start_time-e.time,J()):e.time>e.project.start_time&&(q.value.hasStart=1,E.value=e.project.end_time-e.time,J())})).catch((e=>{O.value.loading=!1}))}catch(e){}else try{O.value.loading=!0,H({url:"invest/projectDetail",methods:"get",data:{id:P.value}}).then((e=>{O.value.loading=!1,q.value=e.project})).catch((e=>{O.value.loading=!1}))}catch(e){}H({url:"user/index",methods:"get"}).then((e=>{z.value=e})).catch((e=>{}))},J=()=>{N.value=setInterval((()=>{0===E.value&&(clearInterval(N.value),G()),E.value--;const e=Math.floor(E.value/3600),t=Math.floor(E.value%3600/60),l=E.value%60;U.value=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`}),1e3)};a((()=>{G()}));const K=l("");return j((e=>{K.value=s("currency"),e.id?(P.value=e.id,1==e.pre?A.value=!0:A.value=!1):history.back()})),C((()=>{N.value&&clearInterval(N.value)})),(e,t)=>{const l=d,a=m,s=c("nut-progress"),y=g,w=c("nut-overlay"),j=$(u("Loading"),k);return r(),o(l,null,{default:n((()=>[i(S,{title:_(I)("construct.c_s8")},null,8,["title"]),i(l,{class:"pdlr30 mt50"},{default:n((()=>[i(l,{class:"topBox"},{default:n((()=>[i(l,{class:"f26"},{default:n((()=>[v(f(q.value.title),1)])),_:1}),i(a,{class:"mt24",src:q.value.full_banner,style:{width:"100%",height:"300rpx","border-radius":"20rpx"}},null,8,["src"]),A.value&&1==q.value.hasStart?(r(),o(l,{key:0,class:"mt27 center",style:{color:"#FE6260","line-height":"35rpx"}},{default:n((()=>[i(l,{class:"f26"},{default:n((()=>[v(f(_(I)("construct.c_c1"))+":",1)])),_:1}),i(l,{class:"f40"},{default:n((()=>[v(f(U.value),1)])),_:1})])),_:1})):p("",!0),A.value&&2==q.value.hasStart?(r(),o(l,{key:1,class:"mt27 center",style:{color:"#FE6260","line-height":"35rpx"}},{default:n((()=>[i(l,{class:"f26"},{default:n((()=>[v(f(_(I)("construct.c_c2"))+":",1)])),_:1}),i(l,{class:"f40"},{default:n((()=>[v(f(U.value),1)])),_:1})])),_:1})):p("",!0),A.value?p("",!0):(r(),o(l,{key:2,style:{width:"100%"},class:"mt29 flex col_center pdlr"},{default:n((()=>[i(l,{style:{width:"400rpx"}},{default:n((()=>[i(s,{style:{height:"28rpx"},percentage:Number(((q.value.sale_panel>q.value.total_panel?q.value.total_panel:q.value.sale_panel)/q.value.total_panel*100).toFixed(2)),"is-show-percentage":!0,"text-inside":!1,"text-color":_(F).$state.contentColor,"stroke-color":_(F).$state.contentColor},null,8,["percentage","text-color","stroke-color"])])),_:1}),i(l,{class:"f20 ml23"},{default:n((()=>[v(f(q.value.sale_panel>q.value.total_panel?q.value.total_panel:q.value.sale_panel)+"/"+f(q.value.total_panel),1)])),_:1})])),_:1})),i(l,{class:"mt26 pt34",style:{"border-top":"1rpx solid #eee"}},{default:n((()=>[i(l,{class:"between"},{default:n((()=>[i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28"},{default:n((()=>[v(f(q.value.profit_per),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(_(I)("construct.c_c3")),1)])),_:1})])),_:1}),i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28"},{default:n((()=>[v(f(q.value.period),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(1==q.value.is_experience?_(I)("construct.c_c4"):_(I)("construct.c_c5")),1)])),_:1})])),_:1}),i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28"},{default:n((()=>[v(f(q.value.price),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(_(I)("construct.c_c6")),1)])),_:1})])),_:1})])),_:1}),i(l,{class:"between mt23"},{default:n((()=>[i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28"},{default:n((()=>[v(f(q.value.per_panel),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(_(I)("construct.c_c7")),1)])),_:1})])),_:1}),i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28 textHiddenOne",style:{width:"100%"}},{default:n((()=>[v(f(1==q.value.is_experience?_(I)("construct.c_c8"):_(I)("construct.c_c9")),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(_(I)("construct.c_c10")),1)])),_:1})])),_:1}),i(l,{class:"center flex_col"},{default:n((()=>[i(l,{class:"text_bold f28"},{default:n((()=>[v(f(q.value.max_invest_per),1)])),_:1}),i(l,{class:"color9 f24 textHiddenOne"},{default:n((()=>[v(f(_(I)("construct.c_c11")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(l,{class:"botBox mt60"},{default:n((()=>[i(l,{class:"title"},{default:n((()=>[v(f(_(I)("construct.c_c12")),1)])),_:1}),i(l,{class:"botIntro desc"},{default:n((()=>[i(l,{innerHTML:q.value.content},null,8,["innerHTML"])])),_:1})])),_:1}),A.value?(r(),o(l,{key:0,class:"botBtn"},{default:n((()=>[D.value?(r(),o(l,{key:0,class:"btns paid text_white",style:x({background:_(F).$state.contentColor}),onClick:M},{default:n((()=>[v(f(_(I)("construct.c_c13"))+" ",1),i(y,{style:{color:"#FFA115"}},{default:n((()=>[v(f(q.value.price_per)+" "+f(K.value),1)])),_:1})])),_:1},8,["style"])):(r(),o(l,{key:1,class:"btns paid text_white"},{default:n((()=>[v(f(_(I)("construct.c_c14"))+" "+f(q.value.price_per)+" "+f(K.value),1)])),_:1}))])),_:1})):(r(),o(l,{key:1,class:"botBtn"},{default:n((()=>[3==q.value.status?(r(),o(l,{key:0,class:"btns paid text_white"},{default:n((()=>[v(f(_(I)("construct.c_c14"))+" "+f(q.value.price)+" "+f(K.value),1)])),_:1})):(r(),o(l,{key:1,class:"btns paid text_white",style:x({background:_(F).$state.contentColor}),onClick:M},{default:n((()=>[v(f(_(I)("construct.c_c15"))+" ",1),i(y,{style:{color:"#FFA115"}},{default:n((()=>[v(f(q.value.price)+" "+f(K.value),1)])),_:1})])),_:1},8,["style"]))])),_:1}))])),_:1}),i(w,{visible:B.value,"onUpdate:visible":t[1]||(t[1]=e=>B.value=e)},{default:n((()=>[h("div",{class:"wrapper"},[h("div",{class:"content"},[i(l,{class:"f40"},{default:n((()=>[v(f(_(I)("all.a_t1")),1)])),_:1}),i(l,{class:"f30 mt20"},{default:n((()=>[v(f(_(I)("construct.c_c16")),1)])),_:1}),i(l,{class:"between"},{default:n((()=>[i(l,{style:x([{border:"1rpx solid"},{"border-color":_(F).$state.contentColor,color:_(F).$state.contentColor}]),onClick:t[0]||(t[0]=e=>B.value=!1)},{default:n((()=>[v(f(_(I)("all.a_c1")),1)])),_:1},8,["style"]),i(l,{class:"text_white",style:x({background:_(F).$state.contentColor}),onClick:T},{default:n((()=>[v(f(_(I)("all.a_c2")),1)])),_:1},8,["style"])])),_:1})])])])),_:1},8,["visible"]),i(w,{visible:L.value,"onUpdate:visible":t[4]||(t[4]=e=>L.value=e)},{default:n((()=>[h("div",{class:"wrapper"},[h("div",{class:"content"},[i(l,{class:"f40"},{default:n((()=>[v(f(_(I)("all.a_t1")),1)])),_:1}),i(l,{class:"f30 mt20 text_center textHiddenTwo",style:{"line-height":"45rpx"}},{default:n((()=>[v(f(_(I)("construct.c_c17")),1)])),_:1}),i(l,{class:"between"},{default:n((()=>[i(l,{style:x([{border:"1rpx solid"},{"border-color":_(F).$state.contentColor,color:_(F).$state.contentColor}]),onClick:t[2]||(t[2]=e=>L.value=!1)},{default:n((()=>[v(f(_(I)("all.a_c1")),1)])),_:1},8,["style"]),i(l,{class:"text_white",style:x({background:_(F).$state.contentColor}),onClick:t[3]||(t[3]=e=>{b({url:"../recharge/index"})})},{default:n((()=>[v(f(_(I)("all.a_c2")),1)])),_:1},8,["style"])])),_:1})])])])),_:1},8,["visible"]),i(l,{style:{height:"200rpx"}}),i(j,{ref_key:"showLoading",ref:O},null,512)])),_:1})}}},[["__scopeId","data-v-22c5988e"]]);export{F as default};
