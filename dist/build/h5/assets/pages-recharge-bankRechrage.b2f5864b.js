import{u as e,a,r as l,c as t,d as s,e as o,w as u,i as n,f as r,k as c,n as d,l as i,t as f,h as m,j as v,F as _,m as p,q as h,T as y,P as g,Q as b}from"./index.61b5b460.js";import{_ as k}from"./loading.d21df86d.js";import{_ as C,o as x,a as w,r as $}from"./request.ef5cbed2.js";import{t as I}from"./topNav.ecc43495.js";var B=C({__name:"bankRechrage",setup(C){const B=e(),{t:j}=a(),L={background:B.$state.contentColor,boxShadow:"none ",color:"#fff"},V={color:B.$state.contentColor},q=l(null),E=l(-1),F=l(-1),S=l(-1),T=l([]),D=l({});l({});const H=l(""),M=e=>{if(-1==E.value)return!1;T.value[E.value].buttons.forEach(((a,l)=>{a!==e.detail.value&&(F.value=-1)}))},N=()=>{q.value.loading=!0;const e={amount:H.value,channelId:T.value[E.value].id,way:T.value[E.value].way.length>0?T.value[E.value].way[S.value].id:0};$({url:"/finance/bank/recharge/submit",methods:"post",data:e}).then((e=>{q.value.loading=!1;let a=e;if(0==a.is_post)window.location.href=a.native_url;else if(1==a.is_post){const e=document.createElement("div");let l="",t=a.params;for(let o in a.params)l+=`<input name="${o}" value="${t[o]}" type="hidden" />`;let s=`<form method="post" action='${native_url}'>\n\t\t\t \t\t                            ${l}\n\t\t\t \t\t                        </form>`;e.innerHTML=s,document.body.appendChild(e),document.forms[0].submit()}else 2==a.is_post&&h({url:"/pages/clabe/clabe?clabe="+a.native_url+"&amount="+a.verify_money})})).catch((e=>{q.value.loading=!1,y.text(e.message)}))},P=l("$");return x((()=>{$({url:"finance/bank/recharge/index",methods:"get"}).then((e=>{T.value=e.channels,D.value=e.user}))})),(e,a)=>{const l=n,h=g,y=b,C=w(t("Loading"),k);return s(),o(l,null,{default:u((()=>[r(I,{title:c(j)("recharge.r_r1")},null,8,["title"]),r(l,{class:"pdlr45 mt70"},{default:u((()=>[r(l,{class:"mt55"},{default:u((()=>[r(l,{class:"topBox center flex-col",style:d(c(B).$state.wr.reBox)},{default:u((()=>[r(l,{class:"topItem f26"},{default:u((()=>[i(f(c(j)("all.b_b1")),1)])),_:1}),r(l,{class:"mt35 f55",style:{color:"#661400"}},{default:u((()=>[i(f(P.value)+" "+f(D.value.balance),1)])),_:1})])),_:1},8,["style"]),r(l,{class:"mt40 inputItem"},{default:u((()=>[r(h,null,{default:u((()=>[i(f(P.value),1)])),_:1}),r(l,{class:"pl35"},{default:u((()=>[r(y,{type:"number",focus:!0,placeholder:c(j)("recharge.r_r2"),"placeholder-class":"f30 plo",modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),onInput:M},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),r(l,{class:"f20 mt30 text_center",style:{color:"#F43D45"}},{default:u((()=>[i(" *"+f(c(j)("recharge.r_r9"))+" "+f(T.value[E.value]?T.value[E.value].min+"-"+T.value[E.value].max:0),1)])),_:1}),T.value.length>0?(s(),o(l,{key:0},{default:u((()=>[r(l,{class:"mt54 f34 secondClo",style:d({color:c(B).$state.secondColor})},{default:u((()=>[i(f(c(j)("recharge.r_r4")),1)])),_:1},8,["style"]),r(l,{class:"mainBox mt40"},{default:u((()=>[(s(!0),m(_,null,v(T.value,((e,a)=>(s(),o(l,{class:"chooseItem",style:d(E.value==a?L:V),onClick:e=>E.value=a},{default:u((()=>[i(f(e.alias),1)])),_:2},1032,["style","onClick"])))),256))])),_:1}),E.value>-1?(s(),o(l,{key:0},{default:u((()=>[r(l,{class:"mt54 f34 secondClo",style:d({color:c(B).$state.secondColor})},{default:u((()=>[i(f(c(j)("recharge.r_r5")),1)])),_:1},8,["style"]),r(l,{class:"mainBox mt35"},{default:u((()=>[(s(!0),m(_,null,v(T.value[E.value].buttons,((e,a)=>(s(),o(l,{class:"chooseItem",style:d(F.value==a?L:V),onClick:l=>((e,a)=>{F.value=e,H.value=a})(a,e)},{default:u((()=>[i(f(e),1)])),_:2},1032,["style","onClick"])))),256))])),_:1})])),_:1})):p("",!0),E.value>-1&&T.value[E.value].way.length>0?(s(),o(l,{key:1},{default:u((()=>[r(l,{class:"mt54 f34 secondClo",style:d({color:c(B).$state.secondColor})},{default:u((()=>[i(f(c(j)("recharge.r_r5")),1)])),_:1},8,["style"]),r(l,{class:"mainBox mt35"},{default:u((()=>[(s(!0),m(_,null,v(T.value[E.value].way,((e,a)=>(s(),o(l,{class:"chooseItem",style:d(S.value==a?L:V),onClick:e=>S.value=a},{default:u((()=>[i(f(e.name),1)])),_:2},1032,["style","onClick"])))),256))])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0),r(l,{class:"center l_inpS mt40 l_inpBg pdlr30 text_white f32",style:d([{"margin-top":"114rpx"},{background:c(B).$state.contentColor}]),onClick:N},{default:u((()=>[i(f(c(j)("recharge.r_r6")),1)])),_:1},8,["style"])])),_:1}),r(l,{style:{height:"100rpx"}}),r(C,{ref_key:"showLoading",ref:q},null,512)])),_:1})])),_:1})}}},[["__scopeId","data-v-38175443"]]);export{B as default};
